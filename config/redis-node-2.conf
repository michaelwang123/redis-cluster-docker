# Redis 节点2 配置文件

# 基本配置
port 6379
bind 0.0.0.0
protected-mode no
daemonize no

# 持久化配置
dir /data
dbfilename dump-node-2.rdb
appendonly yes
appendfilename "appendonly-node-2.aof"

# 集群配置
cluster-enabled yes
cluster-config-file nodes-node-2.conf
cluster-node-timeout 15000

# 关键配置：解决Docker网络隔离问题
# 声明宿主机可访问的IP和端口
# 注意：初始化时先注释这些配置，初始化完成后再动态设置
# cluster-announce-ip 127.0.0.1
# cluster-announce-port 6372
# cluster-announce-bus-port 16372

# 日志配置
loglevel notice
logfile ""

# 内存优化
maxmemory 256mb
maxmemory-policy allkeys-lru

# 网络优化
tcp-keepalive 60
timeout 300